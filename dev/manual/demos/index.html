
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../policies/">
      
      
        <link rel="next" href="../extension/">
      
      
      <link rel="icon" href="../../None">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Demonstration Language - Delphyne</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-demonstration-language" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Delphyne" class="md-header__button md-logo" aria-label="Delphyne" data-md-component="logo">
      
  <img src="../../assets/logos/white/mini.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Delphyne
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Demonstration Language
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Delphyne" class="md-nav__button md-logo" aria-label="Delphyne" data-md-component="logo">
      
  <img src="../../assets/logos/white/mini.png" alt="logo">

    </a>
    Delphyne
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Manual
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Manual
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategy Language
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Policy Language
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Demonstration Language
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Demonstration Language
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#demonstration-files" class="md-nav__link">
    <span class="md-ellipsis">
      Demonstration Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demonstration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Demonstration Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Demonstration Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#walking-through-the-tree" class="md-nav__link">
    <span class="md-ellipsis">
      Walking through the Tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exploring-alternative-paths-with-hints" class="md-nav__link">
    <span class="md-ellipsis">
      Exploring alternative paths with hints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopping-at-particular-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Stopping at particular nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entering-nested-spaces" class="md-nav__link">
    <span class="md-ellipsis">
      Entering nested spaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entering-a-child" class="md-nav__link">
    <span class="md-ellipsis">
      Entering a child
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSCode Extension
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to-guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How-To Guides
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Strategy Language
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Strategy Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/strategies/trees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trees and Spaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/strategies/strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategies and Reification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/strategies/queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queries and Chats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/strategies/traces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    References and Traces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/strategies/misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Policy Language
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Policy Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/policies/definitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Definitions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/policies/streams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Search Streams
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Demonstration Language
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Demonstration Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/demos/definitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Definitions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/demos/interpreter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interpreter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Standard Library
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Standard Library
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stdlib/basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stdlib/queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stdlib/streams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Streams
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stdlib/environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stdlib/effects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Effects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stdlib/algorithms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stdlib/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stdlib/experiments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Experiments
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delphyne CLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#demonstration-files" class="md-nav__link">
    <span class="md-ellipsis">
      Demonstration Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#demonstration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Demonstration Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Demonstration Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#walking-through-the-tree" class="md-nav__link">
    <span class="md-ellipsis">
      Walking through the Tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exploring-alternative-paths-with-hints" class="md-nav__link">
    <span class="md-ellipsis">
      Exploring alternative paths with hints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopping-at-particular-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Stopping at particular nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entering-nested-spaces" class="md-nav__link">
    <span class="md-ellipsis">
      Entering nested spaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entering-a-child" class="md-nav__link">
    <span class="md-ellipsis">
      Entering a child
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="the-demonstration-language">The Demonstration Language</h1>
<p>Delphyne includes a demonstration language for writing and maintaining few-shot prompting examples, in the form of coherent scenarios of navigating search trees. The demonstration language is amenable to a test-driven development workflow. This workflow is supported by a dedicated VSCode extension, which is described in the <a href="../extension/">next chapter</a>.</p>
<h2 id="demonstration-files">Demonstration Files</h2>
<p>Demonstrations can be written in demonstration files with a <code>.demo.yaml</code> extension. A demonstration file features a list of demonstrations (<a class="autorefs autorefs-internal" title="Demo" href="../../reference/demos/definitions/#delphyne.core.demos.Demo"><code>Demo</code></a>). Each demonstration can be separately evaluated. Many short examples can be found in the demonstration file from Delphyne's test suite:</p>
<details class="info">
<summary>Source for <code>tests/example_strategies.demo.yaml</code></summary>
<div class="highlight"><pre><span></span><code><span class="c1">#####</span>
<span class="c1">##### Unit Tests for the Demonstration Language</span>
<span class="c1">#####</span>

<span class="c1"># Note: some demonstrations feature errors or failing tests.</span>
<span class="c1"># Some demonstrations also contain an additional `expect` section</span>
<span class="c1"># describing parts of the expected demonstration interpreter feedback.</span>


<span class="c1">##### Used for testing the UI</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>


<span class="c1">##### Testing standalone query demos</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MakeSum_demo</span>
<span class="w">  </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MakeSum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">  </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[9,</span><span class="nv"> </span><span class="s">2]&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wrong_sum&quot;</span>
<span class="w">      </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[9,</span><span class="nv"> </span><span class="s">6]&quot;</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Unknown_query</span>
<span class="w">  </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Unknown</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">answers</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>


<span class="c1">##### Testing make_sum</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum_demo</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">take &#39;&#39; | success</span><span class="w">  </span><span class="c1"># same result as above but more fragile</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;wrong_sum&#39; | success</span><span class="w">  </span><span class="c1"># error</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;alt_order&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">take cands{&#39;alt_order&#39;} | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">failure | run</span><span class="w">  </span><span class="c1"># error</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MakeSum</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[9,</span><span class="nv"> </span><span class="s">2]&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wrong_sum&quot;</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[9,</span><span class="nv"> </span><span class="s">6]&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;alt_order&quot;</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[2,</span><span class="nv"> </span><span class="s">9]&quot;</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trace</span><span class="p">:</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">        </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Branch</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="nt">2</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Success</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="nt">3</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Fail</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="nt">4</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Success</span><span class="p p-Indicator">}</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Success</span><span class="nv"> </span><span class="s">check</span><span class="nv"> </span><span class="s">failed.&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">        </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">        </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Failure</span><span class="nv"> </span><span class="s">check</span><span class="nv"> </span><span class="s">failed.&quot;</span><span class="p p-Indicator">]</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum_selectors</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;wrong_sum&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;unknown_hint&#39;</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MakeSum</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[9,</span><span class="nv"> </span><span class="s">2]&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wrong_sum&quot;</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[9,</span><span class="nv"> </span><span class="s">6]&quot;</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trace</span><span class="p">:</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">        </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Branch</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="nt">2</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Fail</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="nt">3</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Success</span><span class="p p-Indicator">}</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;warning&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Unused</span><span class="nv"> </span><span class="s">hints:</span><span class="nv"> </span><span class="s">&#39;unknown_hint&#39;.&quot;</span><span class="p p-Indicator">]</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum_at</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at Unknown</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at MakeSum | run</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MakeSum</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[9,</span><span class="nv"> </span><span class="s">2]&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wrong_sum&quot;</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[9,</span><span class="nv"> </span><span class="s">6]&quot;</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trace</span><span class="p">:</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">        </span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Branch</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="nt">2</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Success</span><span class="p p-Indicator">}</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;warning&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Leaf</span><span class="nv"> </span><span class="s">node</span><span class="nv"> </span><span class="s">reached</span><span class="nv"> </span><span class="s">before</span><span class="nv"> </span><span class="s">&#39;Unknown&#39;.&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum_stuck</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trace</span><span class="p">:</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Branch</span><span class="p p-Indicator">}}</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="s">&quot;warning&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Test</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">stuck.&quot;</span><span class="p p-Indicator">]]</span>
<span class="w">        </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum_test_parse_error</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bad_command</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Syntax</span><span class="nv"> </span><span class="s">error.&quot;</span><span class="p p-Indicator">]]</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trivial_strategy</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trivial_strategy</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">run</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">trace</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">nodes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">1</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="nv">Success</span><span class="p p-Indicator">}}}}</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buggy_strategy</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buggy_strategy</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">run</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">global_diagnostics</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">]</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">strategy_not_found</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unknown_strategy</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">run</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">global_diagnostics</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">]</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">invalid_arguments</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bad_arg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">run</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">global_diagnostics</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">]</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unknown_query</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MakeSum</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UnknownQuery</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">query_diagnostics</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">]]</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">invalid_answer</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">make_sum</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MakeSum</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">allowed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;foo&#39;&quot;</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">answer_diagnostics</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;error&quot;</span><span class="p p-Indicator">]]</span>


<span class="c1">##### Testing synthetize_fun</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">synthetize_fun_demo</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">synthetize_fun</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vars</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;vars_1</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;x&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;y&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">prop</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;prop_1</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="s">&quot;a&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="s">&quot;F(a,</span><span class="nv"> </span><span class="s">b)</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">F(b,</span><span class="nv"> </span><span class="s">a)</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">F(0,</span><span class="nv"> </span><span class="s">1)</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">2&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;invalid&#39; | failure</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at conjecture_expr | go disprove(&#39;wrong1&#39;) | save wrong1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">load wrong1 | run | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">load wrong1 | run &#39;bad_cex&#39; | failure</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">load wrong1 | run &#39;malformed_cex&#39; | failure</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at conjecture_expr | go aggregate([&#39;&#39;, &#39;wrong1&#39;, &#39;wrong2&#39;])</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at conjecture_expr | go aggregate([&#39;&#39;, &#39;unknown&#39;, &#39;wrong2&#39;])</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at conjecture_expr | answer aggregate([&#39;wrong1&#39;, &#39;wrong2&#39;])</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at conjecture_expr | answer aggregate([&#39;&#39;, &#39;wrong1&#39;, &#39;wrong2&#39;])</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConjectureExpr</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">vars</span><span class="p">:</span><span class="w"> </span><span class="nv">*vars_1</span><span class="p p-Indicator">,</span><span class="nt"> prop</span><span class="p">:</span><span class="w"> </span><span class="nv">*prop_1</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">right</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2*(x</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">y)&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wrong1</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;x</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">2*y&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wrong2</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2*y</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">x&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">invalid</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sys.exit()&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ProposeCex</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">prop</span><span class="p">:</span><span class="w"> </span><span class="nv">*prop_1</span><span class="p p-Indicator">,</span><span class="nt"> fun</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[[</span><span class="nv">x</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">y</span><span class="p p-Indicator">],</span><span class="w"> </span><span class="s">&quot;x</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">2*y&quot;</span><span class="p p-Indicator">]}</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{a:</span><span class="nv"> </span><span class="s">0,</span><span class="nv"> </span><span class="s">b:</span><span class="nv"> </span><span class="s">1}&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">malformed_cex</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{x:</span><span class="nv"> </span><span class="s">1,</span><span class="nv"> </span><span class="s">y:</span><span class="nv"> </span><span class="s">1}&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bad_cex</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{a:</span><span class="nv"> </span><span class="s">0,</span><span class="nv"> </span><span class="s">b:</span><span class="nv"> </span><span class="s">0}&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RemoveDuplicates</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">exprs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;2*(x</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">y)&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;x</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">2*y&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;2*y</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">x&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;[&quot;2*(x</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">y)&quot;,</span><span class="nv"> </span><span class="s">&quot;x</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">2*y&quot;]&#39;</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;error&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Not</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">nested</span><span class="nv"> </span><span class="s">tree:</span><span class="nv"> </span><span class="s">aggregate([&#39;&#39;,</span><span class="nv"> </span><span class="s">&#39;wrong1&#39;,</span><span class="nv"> </span><span class="s">&#39;wrong2&#39;]).&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;warning&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;Unused</span><span class="nv"> </span><span class="s">hints:</span><span class="nv"> </span><span class="s">&#39;unknown&#39;.&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;error&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>

<span class="w">    </span><span class="nt">global_diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">    </span><span class="nt">saved_nodes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">wrong1</span><span class="p">:</span><span class="w"> </span><span class="nv">__any__</span><span class="p p-Indicator">}</span>


<span class="c1">##### Testing pick_nice_boy_name</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test_iterate</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pick_nice_boy_name</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">names</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;Adeline&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Noah&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Julia&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Jonathan&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;girl_name&#39; | failure</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;other_boy_name&#39; | failure</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go cands | go next(nil)</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go cands | go next(next(nil){&#39;other_boy_name&#39;}[1]) | run | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go cands | go next(next(next(nil){&#39;other_boy_name&#39;}[1]){&#39;&#39;}[1]) | run | failure</span>
<span class="w">    </span><span class="c1"># Valid selectors</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at iterate</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at pick_boy_name</span><span class="w">  </span><span class="c1"># synonym because `iterate` uses `inherit_tags`</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at iterate&amp;pick_boy_name</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at iterate/pick_boy_name/PickBoyName</span>
<span class="w">    </span><span class="c1"># Invalid selectors</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at iterate/pick_boy_name</span><span class="w">  </span><span class="c1"># `Iteration` node has no tags or primary space</span>

<span class="w">    </span><span class="c1"># Mistakenly send the wrong value to `next` by using index 0 instead of 1. The strategy raises</span>
<span class="w">    </span><span class="c1"># an exception because it explicitly checks the type of its arguments but without this</span>
<span class="w">    </span><span class="c1"># assertion, we would get stuck on a query with ill-typed arguments.</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">go cands | go next(next(nil){&#39;other_boy_name&#39;}[0]) | run | success</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PickBoyName</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">names</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Adeline</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Noah</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Julia</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Jonathan</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">picked_already</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jonathan&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">girl_name</span>
<span class="w">        </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Julia&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">other_boy_name</span>
<span class="w">        </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Noah&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PickBoyName</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">names</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Adeline</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Noah</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Julia</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Jonathan</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">picked_already</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Noah</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jonathan&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PickBoyName</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">names</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Adeline</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Noah</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Julia</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Jonathan</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">picked_already</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Noah</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Jonathan</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Sigmund&quot;</span>

<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;warning&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;error&quot;</span>


<span class="c1">##### Testing generate_pairs and advanced selectors</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test_generate_pairs</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">generate_pairs</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at PickPositiveInteger#1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at PickPositiveInteger#2</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at PickPositiveInteger#3</span><span class="w">  </span><span class="c1"># error</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PickPositiveInteger</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">prev</span><span class="p">:</span><span class="w"> </span><span class="nv">null</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PickPositiveInteger</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">prev</span><span class="p">:</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2&quot;</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;warning&quot;</span>


<span class="c1">##### Testing cached computations</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp_result_in_cache</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test_cached_computations</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">n</span><span class="p">:</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__Computation__</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">fun</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">expensive_computation</span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">n</span><span class="p">:</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[2,</span><span class="nv"> </span><span class="s">3]&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__Computation__</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">fun</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">expensive_computation</span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">n</span><span class="p">:</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[3,</span><span class="nv"> </span><span class="s">4]&quot;</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comp_result_outside_cache</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test_cached_computations</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">n</span><span class="p">:</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">    </span><span class="nt">implicit_answers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">computations</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__Computation__</span>
<span class="w">          </span><span class="nt">query_args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">fun</span><span class="p">:</span><span class="w"> </span><span class="nv">expensive_computation</span><span class="p p-Indicator">}</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__Computation__</span>
<span class="w">          </span><span class="nt">query_args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">fun</span><span class="p">:</span><span class="w"> </span><span class="nv">expensive_computation</span><span class="p p-Indicator">}</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">structured_output</span>
<span class="w">  </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StructuredOutput</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">topic</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Music&quot;</span>
<span class="w">  </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Understanding</span><span class="nv"> </span><span class="s">Bach&quot;</span>
<span class="w">        </span><span class="nt">authors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;Brigitte</span><span class="nv"> </span><span class="s">Mouterde&quot;</span><span class="p p-Indicator">]</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool_use</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">propose_article</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Jonathan</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ProposeArticle</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Jonathan</span>
<span class="w">        </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">          </span><span class="nt">call</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">tool</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GetUserFavoriteTopic</span>
<span class="w">              </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="nv">Jonathan</span><span class="p p-Indicator">}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ProposeArticle</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Jonathan</span>
<span class="w">        </span><span class="nt">prefix</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">oracle</span>
<span class="w">            </span><span class="nt">answer</span><span class="p">:</span>
<span class="w">              </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">              </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">              </span><span class="nt">tool_calls</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GetUserFavoriteTopic</span>
<span class="w">                  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Jonathan</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tool</span>
<span class="w">            </span><span class="nt">call</span><span class="p">:</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GetUserFavoriteTopic</span>
<span class="w">              </span><span class="nt">args</span><span class="p">:</span>
<span class="w">                </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Jonathan</span>
<span class="w">            </span><span class="nt">result</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Soccer</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="nt">call</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[{</span><span class="nt">tool</span><span class="p">:</span><span class="w"> </span><span class="nv">Article</span><span class="p p-Indicator">,</span><span class="nt"> args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;All</span><span class="nv"> </span><span class="s">about</span><span class="nv"> </span><span class="s">Messi&quot;</span><span class="p p-Indicator">,</span><span class="nt"> authors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;Raf&quot;</span><span class="p p-Indicator">]}}]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flags</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pick_flag</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;#alt&#39; | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;#unk&#39;</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;warning&quot;</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flags_global</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pick_flag</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MethodFlag</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">answer</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">alt</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">abduction</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">obtain_item</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">market</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;market</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Joe</span>
<span class="w">        </span><span class="nt">asked_items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">apple</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">cherry</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">offered_item</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">banana</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Eric</span>
<span class="w">        </span><span class="nt">asked_items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">        </span><span class="nt">offered_item</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apple</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Alice</span>
<span class="w">        </span><span class="nt">asked_items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">        </span><span class="nt">offered_item</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cherry</span>
<span class="w">    </span><span class="nt">goal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">banana</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ObtainItem</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="nt">market</span><span class="p">:</span><span class="w"> </span><span class="nv">*market</span>
<span class="w">        </span><span class="nt">possessed_items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">        </span><span class="nt">item</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">banana</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">items</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">apple</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">cherry</span><span class="p p-Indicator">]}</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>


<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trivial_untyped_strategy</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trivial_untyped_strategy</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">string</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hello&quot;</span>
<span class="w">    </span><span class="nt">integer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">42</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">expect</span><span class="p">:</span>
<span class="w">    </span><span class="nt">test_feedback</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">diagnostics</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">__empty__</span>
</code></pre></div>
</details>
<div class="admonition tip">
<p class="admonition-title">On Reading Demonstration Files</p>
<p>Demonstration files are much easier to read and understand using Delphyne's <a href="../extension/">VSCode extension</a>. <a href="https://code.visualstudio.com/docs/editing/codebasics#_folding">Standard shortcuts</a> can be used to fold and unfold sections. The additional <span class="keys"><kbd class="key-command">Cmd</kbd><span>+</span><kbd class="key-d">D</kbd><span>+</span><kbd class="key-command">Cmd</kbd><span>+</span><kbd class="key-k">K</kbd></span> shortcut can be used to automatically fold all large sections. Demonstrations can be evaluated and the path followed by each test inspected in the extension's <a href="../extension/#navigating-trees">Tree View</a>.</p>
</div>
<p>A demonstration is either a standalone <em>query demonstration</em><sup id="fnref:standalone-ex"><a class="footnote-ref" href="#fn:standalone-ex">1</a></sup> or a <em>strategy demonstration</em>. A <em>query demonstration</em> describes a query instance along with one or several associated answers. A <em>strategy demonstration</em> bundles multiple query demonstrations with unit tests that describe tree navigation scenarios.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is possible to specify few shot examples using one <em>standalone</em> query demonstration per example <em>and nothing else</em>. However, doing so is not recommended. Indeed, such demonstrations are harder to write since tooling cannot be leveraged to generate query descriptions automatically. More importantly, they are harder to read and maintain because individual examples are presented without proper context. Strategy demonstrations allow grounding examples in concrete scenarios, while enforcing this relationship through unit tests.</p>
</div>
<p>Strategy demonstrations have the following shape:</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">demonstration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w">    </span><span class="c1"># optional demonstration name</span>
<span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w">         </span><span class="c1"># name of a strategy function decorated with @strategy</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w">             </span><span class="c1"># dictionary of arguments to pass to this strategy</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">query</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w">       </span><span class="c1"># Query name</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w">        </span><span class="c1"># Query arguments</span>
<span class="w">      </span><span class="nt">answers</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w">   </span><span class="c1"># Optional label (to be referenced in tests)</span>
<span class="w">          </span><span class="nt">example</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"> </span><span class="c1"># Whether to use as an example (optional boolean) </span>
<span class="w">          </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w">    </span><span class="c1"># Optional set of tags</span>
<span class="w">          </span><span class="nt">answer</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">            </span><span class="no">...</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<p>The Delphyne VSCode extension automatically checks the syntactic well-formedness of demonstrations (in addition to allowing their evaluation). For explanations on specific fields, see the <a class="autorefs autorefs-internal" title="StrategyDemo


  
      dataclass
  " href="../../reference/demos/definitions/#delphyne.core.demos.StrategyDemo">API Reference</a>. Tests are expressed using a custom DSL that we describe below.</p>
<h2 id="demonstration-tests">Demonstration Tests</h2>
<p>Evaluating a demonstration consists in evaluating all its tests in sequence. Each test describes a path through the tree, starting from the root. The Delphyne VSCode extension allows visualizing this path. A test can <em>succeed</em>, <em>fail</em>, or be <em>stuck</em>. A test is said to be <em>stuck</em> if it cannot terminate due to a missing query answer. In this case  (and as demonstrated in the <a href="../overview/#adding-demonstrations">Overview</a>), the extension allows locating such a query and adding it to the demonstration.</p>
<p>Each test is composed of a sequence of instructions separated by <code>|</code>. The most common sequence by far is <code>run | success</code>, which we describe next.</p>
<h3 id="walking-through-the-tree">Walking through the Tree</h3>
<p>Starting at the current node, the <code>run</code> instruction uses answers from the <code>queries</code> section to walk through the tree until either a leaf node is reached or an answer is missing (in which case the test is declared as stuck). Each node type (e.g. <a class="autorefs autorefs-internal" title="Branch


  
      dataclass
  " href="../../reference/stdlib/effects/#delphyne.stdlib.nodes.Branch"><code>Branch</code></a>) defines a <a class="autorefs autorefs-internal" title="Navigation" href="../../reference/strategies/trees/#delphyne.Navigation">navigation function</a> that describes how the node should be traversed.</p>
<details class="info">
<summary>Navigation Functions</summary>
<p>A node's navigation function returns a generator that yields local spaces, receives corresponding elements and ultimately returns an action. This is best understood through examples:</p>
<details class="example">
<summary>Example: Navigation function for <code>Branch</code> nodes</summary>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Branch</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
    <span class="n">cands</span><span class="p">:</span> <span class="n">OpaqueSpace</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>

    <span class="nd">@override</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">cands</span><span class="p">)</span>
</code></pre></div>
</details>
<details class="example">
<summary>Example: Navigation function for <code>Join</code> nodes</summary>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Join</span><span class="p">(</span><span class="n">dp</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
    <span class="n">subs</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">dp</span><span class="o">.</span><span class="n">EmbeddedTree</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>

    <span class="nd">@override</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">navigate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ret</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subs</span><span class="p">:</span>
            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="k">yield</span> <span class="n">sub</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
</code></pre></div>
</details>
</details>
<p>Whenever <code>run</code> needs to select an element from a space defined by a query, it looks for this query in the demonstrations <code>queries</code> section and picks the <em>first</em> provided answer. If no answer is found, it gets <em>stuck</em> at the current node. When <code>run</code> encounters a space defined by a tree, it recursively navigates this tree. The <code>run</code> command stops when a leaf is reached. It is often composed with the <code>success</code> command, which ensures that the current node is a success leaf.</p>
<!-- (In contrast to policies, the demonstration interpreter can break within opaque spaces.) -->

<p>Nothing more than <code>run | success</code> is needed to demonstrate taking a direct path to a solution. The more advanced instructions we discuss next are useful to describe more complex scenarios.</p>
<h3 id="advanced-tests">Advanced Tests</h3>
<p>This section describes more advanced test instructions. In addition to the examples from the test suite, demonstrations with advanced tests are featured in the <code>find_invariants</code> example:</p>
<details class="info">
<summary>Extract from <code>examples/find_invariants/abduct_and_branch.demo.yaml</code></summary>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">strategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prove_program_via_abduction_and_branching</span>
<span class="w">  </span><span class="nt">args</span><span class="p">:</span>
<span class="w">    </span><span class="nt">prog</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"> </span><span class="c1"># (1)!</span>
<span class="w">  </span><span class="nt">tests</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run | success</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run &#39;partial&#39; | success</span>
<span class="w">    </span><span class="c1"># Demonstrating `EvaluateProofState`</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at EvaluateProofState#1 &#39;partial&#39; | answer eval</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at EvaluateProofState#2 &#39;partial propose_same&#39; | answer eval</span>
<span class="w">    </span><span class="c1"># Demonstrating `IsProposalNovel`</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at iterate#1 | go cands | go next(next(nil){&#39;partial&#39;}[1]) | save second_attempt</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">load second_attempt | at IsProposalNovel &#39;blacklisted&#39; | answer cands</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">load second_attempt | at IsProposalNovel &#39;not_blacklisted&#39; | answer cands</span>
<span class="w">  </span><span class="nt">queries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"> </span><span class="c1"># (2)!</span>
</code></pre></div>
<ol>
<li>See details in original file.</li>
<li>See details in original file.</li>
</ol>
</details>
<h4 id="exploring-alternative-paths-with-hints">Exploring alternative paths with hints</h4>
<p>The <code>run</code> function can be passed a sequence of answer labels as <em>hints</em>, specifying alternate paths through the tree. Whenever a query is encountered, it checks if an answer is available whose label matches the first provided hint. If so, this answer is used and the hint is consumed. For example, instruction <code>run 'foo bar'</code> can be interpreted as:</p>
<blockquote>
<p>Walk through the tree, using answer <code>foo</code> whenever applicable and then <code>bar</code>.<sup id="fnref:unused-hint"><a class="footnote-ref" href="#fn:unused-hint">4</a></sup></p>
</blockquote>
<p>This design allows describing paths concisely, by only specifying the few places in which they differ from a default path. This works well for demonstrations, which typically describe <em>shallow</em> traces centered around a successful scenario, with side explorations (e.g., showing how a bad decision leads to a low value score, or demonstrating how redundant candidates can be removed at a particular step).</p>
<h4 id="stopping-at-particular-nodes">Stopping at particular nodes</h4>
<p>The <code>at</code> instruction works like <code>run</code>, except that it takes as an additional argument a <a class="autorefs autorefs-internal" title="NodeSelector" href="../../reference/demos/definitions/#delphyne.core.demos.NodeSelector">node selector</a> that specifies a node at which the walk must stop. The simplest form of node selector consists in a <a class="autorefs autorefs-internal" title="Tag" href="../../reference/strategies/trees/#delphyne.Tag">tag</a> to match. For example, instruction <code>at EvalProg 'wrong'</code> behaves similarly to <code>run 'wrong'</code>, except that it stops when encountering a node tagged with <code>EvalProg</code>. By default, all <em>spaces</em> are tagged with the name of the <a class="autorefs autorefs-internal" title="default_tags" href="../../reference/strategies/queries/#delphyne.AbstractQuery.default_tags">associated query</a> or <a class="autorefs autorefs-internal" title="default_tags" href="../../reference/strategies/strategies/#delphyne.StrategyComp.default_tags">strategy</a>, and each node inherits the tags of its <a class="autorefs autorefs-internal" title="primary_space" href="../../reference/strategies/trees/#delphyne.Node.primary_space">primary space</a> if it has one. Custom space tags can be added using the <a class="autorefs autorefs-internal" title="tagged" href="../../reference/strategies/trees/#delphyne.SpaceBuilder.tagged"><code>SpaceBuilder.tagged</code></a> method<sup id="fnref:tagged-ex"><a class="footnote-ref" href="#fn:tagged-ex">2</a></sup>. Finally, the <code>#n</code> operator can be used to match the <span class="arithmatex">\(n^{th}\)</span> instance of a tag. For example, <code>at PickPositiveInteger#2</code> stops at the <em>second</em> encountered node tagged with <code>PickPositiveInteger</code><sup id="fnref:at-op-ex"><a class="footnote-ref" href="#fn:at-op-ex">3</a></sup>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Importantly, <code>at</code> can only stop <em>within</em> the same tree that it started in, and <em>not</em> inside a nested tree. In order to stop at a node tagged with <code>bar</code> <em>within</em> a space tagged with <code>foo</code>, you can use <code>at foo/bar</code>. This design choice is mandated by <em>modularity</em>: individual strategies can be made responsible for setting unambiguous tags for nodes that they control, but cannot ensure the absence of clashing tags in <em>other</em> strategies.</p>
</div>
<h4 id="entering-nested-spaces">Entering nested spaces</h4>
<!-- TODO: find a more canonical example -->

<p>The <code>go</code> instruction allows entering a tree nested within the current node. For example, if the current node is a <code>Conjecture</code> node (defined in <code>tests/example_strategies.py</code>), <code>go cands</code> enters the tree that defines the <code>cands</code> space or errors if <code>cands</code> is defined by a query. This instruction can be shortened as <code>go</code>, since <code>cands</code> is the primary space of <code>Conjecture</code> nodes.</p>
<p>More interestingly, suppose the demonstration already explores two paths within <code>cands</code> that reach different success leaves and thus correspond to two different candidates. Each of these paths can be described through a sequence of <em>hints</em>: the first candidate is identified by <code>''</code> (i.e. default path) and the second by <code>'foo'</code> (i.e. use answer <code>'foo'</code> when appropriate). Then, instruction <code>go aggregate([cands{''}, cands{'foo'}])</code> can be used to enter the strategy tree comparing those two candidates. It can be shortened to <code>go aggregate(['', 'foo'])</code> since <code>cands</code> is a primary space.</p>
<p>In general, any element of a local space can be referenced via a (possibly empty) sequence of hints. For spaces defined by queries, at most one hint is expected that indicates which answer to use. For spaces defined by trees, a sequence of hints is expected that leads to a success leaf by calling <code>run</code> recursively.</p>
<p>The <code>answer</code> instruction is similar to <code>go</code>. It takes a space selector as an argument but expects to find a query instead of a tree when entering this space. It succeeds if the corresponding query is answered in the demonstration and fails otherwise.</p>
<h4 id="entering-a-child">Entering a child</h4>
<p>The <code>take</code> instruction can be used to move to a child of a current node. It takes as an argument a hint-based value reference denoting an action.</p>
<p>For example, at a branching node, <code>take 'foo'</code> (a synonym for <code>take cands{'foo'}</code> since <code>cands</code> is the primary space of <code>Branch</code> nodes) goes to the child corresponding to the candidate associated with hint <code>foo</code>. At a <code>Join</code> node with two subgoals, <code>take [subs[0]{''}, subs[1]{''}]</code> goes to the default child (the same one that would be visited using <code>run</code>).</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:standalone-ex">
<p>An example of a standalone query demonstration is <code>MakeSum_demo</code> in <code>tests/example_strategies.demo.yaml</code>.&#160;<a class="footnote-backref" href="#fnref:standalone-ex" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:tagged-ex">
<p>See <code>tests/example_strategies.py:dual_number_generation</code> for an example.&#160;<a class="footnote-backref" href="#fnref:tagged-ex" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:at-op-ex">
<p>See <code>tests/example_strategies.demo.yaml:test_generate_pairs</code>.&#160;<a class="footnote-backref" href="#fnref:at-op-ex" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:unused-hint">
<p>A warning is issued if the <code>run</code> command reaches a leaf node while unused hints remain.&#160;<a class="footnote-backref" href="#fnref:unused-hint" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
</ol>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../javascript/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>