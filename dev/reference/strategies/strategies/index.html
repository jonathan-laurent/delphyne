
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../trees/">
      
      
        <link rel="next" href="../queries/">
      
      
      <link rel="icon" href="../../../None">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Strategies and Reification - Delphyne</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#strategies-and-reification" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Delphyne" class="md-header__button md-logo" aria-label="Delphyne" data-md-component="logo">
      
  <img src="../../../assets/logos/white/mini.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Delphyne
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Strategies and Reification
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Delphyne" class="md-nav__button md-logo" aria-label="Delphyne" data-md-component="logo">
      
  <img src="../../../assets/logos/white/mini.png" alt="logo">

    </a>
    Delphyne
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Manual
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Manual
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strategies and Trees
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Policies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/demos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Demonstrations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/extension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSCode Extension
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../how-to-guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How-To Guides
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" checked>
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Strategy Language
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Strategy Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../trees/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trees and Spaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Strategies and Reification
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Strategies and Reification
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Strategies
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphyne.Strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.NodeBuilder" class="md-nav__link">
    <span class="md-ellipsis">
      NodeBuilder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp" class="md-nav__link">
    <span class="md-ellipsis">
      StrategyComp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StrategyComp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.inline" class="md-nav__link">
    <span class="md-ellipsis">
      inline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.run_generator" class="md-nav__link">
    <span class="md-ellipsis">
      run_generator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.default_tags" class="md-nav__link">
    <span class="md-ellipsis">
      default_tags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.strategy_name" class="md-nav__link">
    <span class="md-ellipsis">
      strategy_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.strategy_arguments" class="md-nav__link">
    <span class="md-ellipsis">
      strategy_arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.strategy_argument_types" class="md-nav__link">
    <span class="md-ellipsis">
      strategy_argument_types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.return_type" class="md-nav__link">
    <span class="md-ellipsis">
      return_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.inner_policy_type" class="md-nav__link">
    <span class="md-ellipsis">
      inner_policy_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reification" class="md-nav__link">
    <span class="md-ellipsis">
      Reification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphyne.reify" class="md-nav__link">
    <span class="md-ellipsis">
      reify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyException" class="md-nav__link">
    <span class="md-ellipsis">
      StrategyException
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.TreeMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      TreeMonitor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.TreeCache" class="md-nav__link">
    <span class="md-ellipsis">
      TreeCache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.TreeHook" class="md-nav__link">
    <span class="md-ellipsis">
      TreeHook
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internals" class="md-nav__link">
    <span class="md-ellipsis">
      Internals
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Internals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphyne.core.trees.NestedTreeSpawner" class="md-nav__link">
    <span class="md-ellipsis">
      NestedTreeSpawner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.core.trees.QuerySpawner" class="md-nav__link">
    <span class="md-ellipsis">
      QuerySpawner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.core.trees.AbstractBuilderExecutor" class="md-nav__link">
    <span class="md-ellipsis">
      AbstractBuilderExecutor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queries and Chats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../traces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    References and Traces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Policy Language
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Policy Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../policies/definitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Definitions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../policies/streams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Search Streams
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Demonstration Language
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Demonstration Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/definitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Definitions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../demos/interpreter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interpreter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Standard Library
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Standard Library
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stdlib/basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stdlib/queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stdlib/streams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Streams
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stdlib/environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stdlib/effects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Effects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stdlib/algorithms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stdlib/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stdlib/experiments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Experiments
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delphyne CLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Strategies
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphyne.Strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.NodeBuilder" class="md-nav__link">
    <span class="md-ellipsis">
      NodeBuilder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp" class="md-nav__link">
    <span class="md-ellipsis">
      StrategyComp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StrategyComp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.inline" class="md-nav__link">
    <span class="md-ellipsis">
      inline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.run_generator" class="md-nav__link">
    <span class="md-ellipsis">
      run_generator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.default_tags" class="md-nav__link">
    <span class="md-ellipsis">
      default_tags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.strategy_name" class="md-nav__link">
    <span class="md-ellipsis">
      strategy_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.strategy_arguments" class="md-nav__link">
    <span class="md-ellipsis">
      strategy_arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.strategy_argument_types" class="md-nav__link">
    <span class="md-ellipsis">
      strategy_argument_types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.return_type" class="md-nav__link">
    <span class="md-ellipsis">
      return_type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyComp.inner_policy_type" class="md-nav__link">
    <span class="md-ellipsis">
      inner_policy_type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reification" class="md-nav__link">
    <span class="md-ellipsis">
      Reification
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphyne.reify" class="md-nav__link">
    <span class="md-ellipsis">
      reify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.StrategyException" class="md-nav__link">
    <span class="md-ellipsis">
      StrategyException
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.TreeMonitor" class="md-nav__link">
    <span class="md-ellipsis">
      TreeMonitor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.TreeCache" class="md-nav__link">
    <span class="md-ellipsis">
      TreeCache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.TreeHook" class="md-nav__link">
    <span class="md-ellipsis">
      TreeHook
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internals" class="md-nav__link">
    <span class="md-ellipsis">
      Internals
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Internals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delphyne.core.trees.NestedTreeSpawner" class="md-nav__link">
    <span class="md-ellipsis">
      NestedTreeSpawner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.core.trees.QuerySpawner" class="md-nav__link">
    <span class="md-ellipsis">
      QuerySpawner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delphyne.core.trees.AbstractBuilderExecutor" class="md-nav__link">
    <span class="md-ellipsis">
      AbstractBuilderExecutor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="strategies-and-reification">Strategies and Reification</h1>
<!-- Covers core.trees, core.node_fields, core.reify -->

<h2 id="strategies">Strategies</h2>


<div class="doc doc-object doc-attribute">



<h3 id="delphyne.Strategy" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">Strategy</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">Strategy</span><span class="p">:</span> <span class="n"><span title="collections.abc.Generator">Generator</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="NodeBuilder


  
      dataclass
   (delphyne.core.trees.NodeBuilder)" href="#delphyne.NodeBuilder">NodeBuilder</a></span><span class="p">[</span><span class="n"><span title="delphyne.core.trees.N">N</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.trees.P">P</span></span><span class="p">],</span> <span class="n"><span title="object">object</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.trees.T">T</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Type of a strategy computation.</p>
<p>A strategy computation is a generator (i.e., a coroutine) that yields
node builders and receives corresponding actions, until it returns a
success value.</p>
<p>Type parameter <code>N</code> (covariant) corresponds to the strategy's type
signature (typically a union of node types), <code>P</code> (contravariant) is its
associated inner policy type and <code>T</code> (covariant) its return type.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Node builders are yielded instead of nodes. Indeed, strategy
computations cannot create nodes since they are unaware of
references. The task of concretely building nodes and maintaining
references is delegated to the <code>refine</code> function.</p>
</div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="delphyne.NodeBuilder" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">NodeBuilder</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="delphyne.core.trees.N">N</span>, <span title="delphyne.core.trees.P">P</span>]</code></p>


        <p>Wrapper for a function that builds a node, given the ability of
spawning trees and attached queries (<code>AbstractBuilderExecutor</code>).</p>
<p>Strategies do not directly yield nodes since building a node
requires knowing its reference along with the associated hooks.</p>
<p>Phantom type <code>P</code> tracks the ambient inner policy type.</p>








              <details class="quote">
                <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NodeBuilder</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">N</span><span class="p">,</span> <span class="n">P</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wrapper for a function that builds a node, given the ability of</span>
<span class="sd">    spawning trees and attached queries (`AbstractBuilderExecutor`).</span>

<span class="sd">    Strategies do not directly yield nodes since building a node</span>
<span class="sd">    requires knowing its reference along with the associated hooks.</span>

<span class="sd">    Phantom type `P` tracks the ambient inner policy type.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">build_node</span><span class="p">:</span> <span class="s2">&quot;Callable[[AbstractBuilderExecutor], N]&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="delphyne.StrategyComp" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">StrategyComp</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="delphyne.core.trees.N">N</span>, <span title="delphyne.core.trees.P">P</span>, <span title="delphyne.core.trees.T">T</span>]</code></p>


        <p>A <em>strategy computation</em> that can be reified into a search tree,
obtained by instantiating a strategy function.</p>
<p>Such objects are usually not created directly but using the
<a class="autorefs autorefs-internal" title="strategy" href="../../stdlib/basic/#delphyne.strategy"><code>@strategy</code> decorator</a> from the standard
library. Metadata information can be provided, such as: a name for
the strategy, a return type and a list of tags.</p>
<details class="note">
<summary>Note</summary>
<p>The name of the <code>_comp</code> function is inspected by methods such as
<code>strategy_name</code>. Its signature (i.e., the name of its arguments)
is inspected by <code>strategy_arguments</code>. When provided, type
annotations are inspected by methods such as <code>return_type</code> and
<code>inner_policy_type</code>. Thus, passing an anonymous function as
<code>_comp</code> is not recommended.</p>
</details>








              <details class="quote">
                <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">StrategyComp</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">N</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A *strategy computation* that can be reified into a search tree,</span>
<span class="sd">    obtained by instantiating a strategy function.</span>

<span class="sd">    Such objects are usually not created directly but using the</span>
<span class="sd">    [`@strategy` decorator][delphyne.stdlib.strategy] from the standard</span>
<span class="sd">    library. Metadata information can be provided, such as: a name for</span>
<span class="sd">    the strategy, a return type and a list of tags.</span>

<span class="sd">    ??? note</span>
<span class="sd">        The name of the `_comp` function is inspected by methods such as</span>
<span class="sd">        `strategy_name`. Its signature (i.e., the name of its arguments)</span>
<span class="sd">        is inspected by `strategy_arguments`. When provided, type</span>
<span class="sd">        annotations are inspected by methods such as `return_type` and</span>
<span class="sd">        `inner_policy_type`. Thus, passing an anonymous function as</span>
<span class="sd">        `_comp` is not recommended.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_comp</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Strategy</span><span class="p">[</span><span class="n">N</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">]]</span>
    <span class="n">_args</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="n">_kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="n">_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
    <span class="n">_return_type</span><span class="p">:</span> <span class="n">TypeAnnot</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">NoTypeInfo</span>
    <span class="n">_tags</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Tag</span><span class="p">]</span>

    <span class="c1">##### External API</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">inline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Strategy</span><span class="p">[</span><span class="n">N</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Inline a strategy computation within another, by executing the</span>
<span class="sd">        underlying coroutine.</span>

<span class="sd">        Example:</span>

<span class="sd">        ```python</span>
<span class="sd">        # Invoking a sub-strategy by branching over an opaque space.</span>
<span class="sd">        y = yield from branch(sub_strategy(foo, bar).using(...))</span>
<span class="sd">        # Invoking a sub-strategy via inlining (the signature and inner</span>
<span class="sd">        # policy types of the sub strategy must be identical).</span>
<span class="sd">        y = yield from sub_strategy(foo, bar).inline()</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_generator</span><span class="p">()</span>

    <span class="c1">##### For internal use in `core` and in the standard library</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Strategy</span><span class="p">[</span><span class="n">N</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run the coroutine associated with the strategy computation. This</span>
<span class="sd">        method is mostly used by [`reify`][delphyne.core.reify] and</span>
<span class="sd">        should not be needed outside of Delphyne&#39;s internals.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_args</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">default_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Tag</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return all default tags associated with the strategy</span>
<span class="sd">        computation. Derived space builders are initialized with these</span>
<span class="sd">        tags, which can later be changed (`tag` field of</span>
<span class="sd">        `SpaceBuilder`).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span>

    <span class="c1">### Inspection methods</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">strategy_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the name of the instantiated strategy function, using the</span>
<span class="sd">        `name` attribute if provided or using `comp.__name__` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
        <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">function_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">strategy_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the dictionary of arguments that was used to instantiate</span>
<span class="sd">        the underlying strategy function (using inspection for naming</span>
<span class="sd">        positional arguments).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">function_args_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">strategy_argument_types</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TypeAnnot</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="n">NoTypeInfo</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a dictionary with the same keys as `strategy_arguments`</span>
<span class="sd">        that maps every strategy argument to its type annotation (or</span>
<span class="sd">        `NoTypeInfo` if none is provided).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hints</span> <span class="o">=</span> <span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">a</span><span class="p">:</span> <span class="n">hints</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">NoTypeInfo</span><span class="p">())</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy_arguments</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">return_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TypeAnnot</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">NoTypeInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the return type of the strategy computation, using the</span>
<span class="sd">        provided metadata or using inspection otherwise (in case a type</span>
<span class="sd">        annotation of the form `Strategy[..., ..., T]` is provided).</span>

<span class="sd">        This information is useful for serializing success values after</span>
<span class="sd">        running the strategy computation (see `run_strategy` command) or</span>
<span class="sd">        for providing superior printing of values in the Delphyne tree</span>
<span class="sd">        view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_return_type</span><span class="p">,</span> <span class="n">NoTypeInfo</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_type</span>
        <span class="n">strategy_type</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">function_return_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">,</span> <span class="n">NoTypeInfo</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">NoTypeInfo</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">return_type_of_strategy_type</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">inner_policy_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TypeAnnot</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">NoTypeInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the inner policy type of the strategy computation, using</span>
<span class="sd">        inspection (when a type annotation of the form `Strategy[..., P,</span>
<span class="sd">        ...]` is provided).</span>

<span class="sd">        This information is not currently used but could be leveraged in</span>
<span class="sd">        the future to dynamically check the compatibility of an</span>
<span class="sd">        associated policy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">strategy_type</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">function_return_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">,</span> <span class="n">NoTypeInfo</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">NoTypeInfo</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">inner_policy_type_of_strategy_type</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="delphyne.StrategyComp.inline" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">inline</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">inline</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Strategy (delphyne.core.trees.Strategy)" href="#delphyne.Strategy">Strategy</a></span><span class="p">[</span><span class="n"><span title="delphyne.core.trees.N">N</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.trees.P">P</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.trees.T">T</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Inline a strategy computation within another, by executing the
underlying coroutine.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Invoking a sub-strategy by branching over an opaque space.</span>
<span class="n">y</span> <span class="o">=</span> <span class="k">yield from</span> <span class="n">branch</span><span class="p">(</span><span class="n">sub_strategy</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
<span class="c1"># Invoking a sub-strategy via inlining (the signature and inner</span>
<span class="c1"># policy types of the sub strategy must be identical).</span>
<span class="n">y</span> <span class="o">=</span> <span class="k">yield from</span> <span class="n">sub_strategy</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span><span class="o">.</span><span class="n">inline</span><span class="p">()</span>
</code></pre></div>


            <details class="quote">
              <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">inline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Strategy</span><span class="p">[</span><span class="n">N</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Inline a strategy computation within another, by executing the</span>
<span class="sd">    underlying coroutine.</span>

<span class="sd">    Example:</span>

<span class="sd">    ```python</span>
<span class="sd">    # Invoking a sub-strategy by branching over an opaque space.</span>
<span class="sd">    y = yield from branch(sub_strategy(foo, bar).using(...))</span>
<span class="sd">    # Invoking a sub-strategy via inlining (the signature and inner</span>
<span class="sd">    # policy types of the sub strategy must be identical).</span>
<span class="sd">    y = yield from sub_strategy(foo, bar).inline()</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_generator</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="delphyne.StrategyComp.run_generator" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">run_generator</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run_generator</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Strategy (delphyne.core.trees.Strategy)" href="#delphyne.Strategy">Strategy</a></span><span class="p">[</span><span class="n"><span title="delphyne.core.trees.N">N</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.trees.P">P</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.trees.T">T</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Run the coroutine associated with the strategy computation. This
method is mostly used by <a class="autorefs autorefs-internal" title="reify" href="#delphyne.reify"><code>reify</code></a> and
should not be needed outside of Delphyne's internals.</p>


            <details class="quote">
              <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Strategy</span><span class="p">[</span><span class="n">N</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the coroutine associated with the strategy computation. This</span>
<span class="sd">    method is mostly used by [`reify`][delphyne.core.reify] and</span>
<span class="sd">    should not be needed outside of Delphyne&#39;s internals.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_args</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="delphyne.StrategyComp.default_tags" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">default_tags</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">default_tags</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="collections.abc.Sequence">Sequence</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="Tag (delphyne.core.trees.Tag)" href="../trees/#delphyne.Tag">Tag</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return all default tags associated with the strategy
computation. Derived space builders are initialized with these
tags, which can later be changed (<code>tag</code> field of
<a class="autorefs autorefs-internal" title="SpaceBuilder


  
      dataclass
  " href="../trees/#delphyne.SpaceBuilder"><code>SpaceBuilder</code></a>).</p>


            <details class="quote">
              <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">default_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Tag</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return all default tags associated with the strategy</span>
<span class="sd">    computation. Derived space builders are initialized with these</span>
<span class="sd">    tags, which can later be changed (`tag` field of</span>
<span class="sd">    `SpaceBuilder`).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="delphyne.StrategyComp.strategy_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">strategy_name</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">strategy_name</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="str">str</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the name of the instantiated strategy function, using the
<code>name</code> attribute if provided or using <code>comp.__name__</code> otherwise.</p>


            <details class="quote">
              <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">strategy_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the name of the instantiated strategy function, using the</span>
<span class="sd">    `name` attribute if provided or using `comp.__name__` otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">function_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="delphyne.StrategyComp.strategy_arguments" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">strategy_arguments</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">strategy_arguments</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the dictionary of arguments that was used to instantiate
the underlying strategy function (using inspection for naming
positional arguments).</p>


            <details class="quote">
              <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">strategy_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the dictionary of arguments that was used to instantiate</span>
<span class="sd">    the underlying strategy function (using inspection for naming</span>
<span class="sd">    positional arguments).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">function_args_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="delphyne.StrategyComp.strategy_argument_types" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">strategy_argument_types</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">strategy_argument_types</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="delphyne.utils.typing.TypeAnnot">TypeAnnot</span></span><span class="p">[</span><span class="n"><span title="typing.Any">Any</span></span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="delphyne.utils.typing.NoTypeInfo">NoTypeInfo</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return a dictionary with the same keys as <code>strategy_arguments</code>
that maps every strategy argument to its type annotation (or
<code>NoTypeInfo</code> if none is provided).</p>


            <details class="quote">
              <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">strategy_argument_types</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TypeAnnot</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="n">NoTypeInfo</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a dictionary with the same keys as `strategy_arguments`</span>
<span class="sd">    that maps every strategy argument to its type annotation (or</span>
<span class="sd">    `NoTypeInfo` if none is provided).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hints</span> <span class="o">=</span> <span class="n">typing</span><span class="o">.</span><span class="n">get_type_hints</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">a</span><span class="p">:</span> <span class="n">hints</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">NoTypeInfo</span><span class="p">())</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">strategy_arguments</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="delphyne.StrategyComp.return_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">return_type</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">return_type</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="delphyne.utils.typing.TypeAnnot">TypeAnnot</span></span><span class="p">[</span><span class="n"><span title="delphyne.core.trees.T">T</span></span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="delphyne.utils.typing.NoTypeInfo">NoTypeInfo</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the return type of the strategy computation, using the
provided metadata or using inspection otherwise (in case a type
annotation of the form <code>Strategy[..., ..., T]</code> is provided).</p>
<p>This information is useful for serializing success values after
running the strategy computation (see <code>run_strategy</code> command) or
for providing superior printing of values in the Delphyne tree
view.</p>


            <details class="quote">
              <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">return_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TypeAnnot</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">NoTypeInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the return type of the strategy computation, using the</span>
<span class="sd">    provided metadata or using inspection otherwise (in case a type</span>
<span class="sd">    annotation of the form `Strategy[..., ..., T]` is provided).</span>

<span class="sd">    This information is useful for serializing success values after</span>
<span class="sd">    running the strategy computation (see `run_strategy` command) or</span>
<span class="sd">    for providing superior printing of values in the Delphyne tree</span>
<span class="sd">    view.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_return_type</span><span class="p">,</span> <span class="n">NoTypeInfo</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_type</span>
    <span class="n">strategy_type</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">function_return_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">,</span> <span class="n">NoTypeInfo</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">NoTypeInfo</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">return_type_of_strategy_type</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="delphyne.StrategyComp.inner_policy_type" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">inner_policy_type</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">inner_policy_type</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="delphyne.utils.typing.TypeAnnot">TypeAnnot</span></span><span class="p">[</span><span class="n"><span title="delphyne.core.trees.T">T</span></span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="delphyne.utils.typing.NoTypeInfo">NoTypeInfo</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the inner policy type of the strategy computation, using
inspection (when a type annotation of the form <code>Strategy[..., P,
...]</code> is provided).</p>
<p>This information is not currently used but could be leveraged in
the future to dynamically check the compatibility of an
associated policy.</p>


            <details class="quote">
              <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">inner_policy_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TypeAnnot</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">NoTypeInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the inner policy type of the strategy computation, using</span>
<span class="sd">    inspection (when a type annotation of the form `Strategy[..., P,</span>
<span class="sd">    ...]` is provided).</span>

<span class="sd">    This information is not currently used but could be leveraged in</span>
<span class="sd">    the future to dynamically check the compatibility of an</span>
<span class="sd">    associated policy.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">strategy_type</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">function_return_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_comp</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">,</span> <span class="n">NoTypeInfo</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">NoTypeInfo</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">inner_policy_type_of_strategy_type</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="reification">Reification</h2>


<div class="doc doc-object doc-function">


<h3 id="delphyne.reify" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">reify</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">reify</span><span class="p">(</span><span class="n">strategy</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="StrategyComp


  
      dataclass
   (delphyne.core.trees.StrategyComp)" href="#delphyne.StrategyComp">StrategyComp</a></span><span class="p">[</span><span class="n"><span title="delphyne.core.reification.reify[N]">N</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.reification.reify[P]">P</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.reification.reify[T]">T</span></span><span class="p">],</span> <span class="n">monitor</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="TreeMonitor


  
      dataclass
   (delphyne.core.reification.TreeMonitor)" href="#delphyne.TreeMonitor">TreeMonitor</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="TreeMonitor


  
      dataclass
   (delphyne.core.reification.TreeMonitor)" href="#delphyne.TreeMonitor">TreeMonitor</a></span><span class="p">(),</span> <span class="n">allow_noncopyable_actions</span><span class="p">:</span> <span class="n"><span title="bool">bool</span></span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Tree


  
      dataclass
   (delphyne.core.trees.Tree)" href="../trees/#delphyne.Tree">Tree</a></span><span class="p">[</span><span class="n"><span title="delphyne.core.reification.reify[N]">N</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.reification.reify[P]">P</span></span><span class="p">,</span> <span class="n"><span title="delphyne.core.reification.reify[T]">T</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Reify a strategy computation into a tree.</p>
<p>The resulting tree raises <a class="autorefs autorefs-internal" title="StrategyException


  
      dataclass
  " href="#delphyne.StrategyException"><code>StrategyException</code></a> whenever the
underlying strategy raises an uncaught exception.</p>
<p>Internally, trees are implemented by having each node keep track of
a sequence of actions leading to it. Calling <code>child</code> appends a new
action to this path and replays the strategy computation from the
start with the new, augmented path.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>strategy</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="StrategyComp


  
      dataclass
   (delphyne.core.trees.StrategyComp)" href="#delphyne.StrategyComp">StrategyComp</a>[<span title="delphyne.core.reification.reify[N]">N</span>, <span title="delphyne.core.reification.reify[P]">P</span>, <span title="delphyne.core.reification.reify[T]">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The strategy to reify.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>monitor</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TreeMonitor


  
      dataclass
   (delphyne.core.reification.TreeMonitor)" href="#delphyne.TreeMonitor">TreeMonitor</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional cache, along with node creation hooks.</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TreeMonitor


  
      dataclass
   (delphyne.core.reification.TreeMonitor)" href="#delphyne.TreeMonitor">TreeMonitor</a>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>allow_noncopyable_actions</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Allow
actions to be nonserializable objects (such as functions)
that cannot be deepcopied. Allowing such actions opens the
door to unsafe side effects corrupting the resulting tree,
so it must be done with care. See discussion below on side
effects.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>
        <div class="admonition note">
<p class="admonition-title">On Side Effects in Strategies</p>
<p>Strategy functions are allowed to have side effects (see
<code>tests/example_strategies/imperative_strategy</code> for example). For
this to be sound, actions are always deepcopied before being
sent back to strategy coroutines. This requirement can be
weakened by setting <code>allow_noncopyable_actions</code> to <code>True</code>. In
this case, noncopyable actions must be immutable. For example, a
pure function can be used as an action but a closure that
captures a mutable piece of state cannot (in which case
computing the child of a node could affect its siblings by
mutating some actions in their paths).</p>
<p>In addition, non-copyable strategy arguments must never be
mutated. Copyable arguments such as lists of copyable values can
be mutated, since <a class="autorefs autorefs-internal" title="reify" href="#delphyne.reify"><code>reify</code></a> automaticallt performs deepcopies.
Noncopyable arguments such as functions are allowed (e.g., to
enable implementing higher-order strategies) but they must be
pure and not mutate any state.</p>
<p>When <code>allow_noncopyable_actions</code> is set to <code>False</code>, a dynamic
check is performed to ensure that actions are copyable: an
action is considered copyable if it can be serialized into JSON
by pydantic (this is necessary since calling <code>deepcopy</code> on a
closure returns the same closure unchanged).</p>
</div>


            <details class="quote">
              <summary>Source code in <code>src/delphyne/core/reification.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reify</span><span class="p">[</span><span class="n">N</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">](</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="n">StrategyComp</span><span class="p">[</span><span class="n">N</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">],</span>
    <span class="n">monitor</span><span class="p">:</span> <span class="n">TreeMonitor</span> <span class="o">=</span> <span class="n">TreeMonitor</span><span class="p">(),</span>
    <span class="n">allow_noncopyable_actions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tree</span><span class="p">[</span><span class="n">N</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reify a strategy computation into a tree.</span>

<span class="sd">    The resulting tree raises `StrategyException` whenever the</span>
<span class="sd">    underlying strategy raises an uncaught exception.</span>

<span class="sd">    Internally, trees are implemented by having each node keep track of</span>
<span class="sd">    a sequence of actions leading to it. Calling `child` appends a new</span>
<span class="sd">    action to this path and replays the strategy computation from the</span>
<span class="sd">    start with the new, augmented path.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        strategy: The strategy to reify.</span>
<span class="sd">        monitor: An optional cache, along with node creation hooks.</span>
<span class="sd">        allow_noncopyable_actions: Allow</span>
<span class="sd">            actions to be nonserializable objects (such as functions)</span>
<span class="sd">            that cannot be deepcopied. Allowing such actions opens the</span>
<span class="sd">            door to unsafe side effects corrupting the resulting tree,</span>
<span class="sd">            so it must be done with care. See discussion below on side</span>
<span class="sd">            effects.</span>

<span class="sd">    !!! note &quot;On Side Effects in Strategies&quot;</span>
<span class="sd">        Strategy functions are allowed to have side effects (see</span>
<span class="sd">        `tests/example_strategies/imperative_strategy` for example). For</span>
<span class="sd">        this to be sound, actions are always deepcopied before being</span>
<span class="sd">        sent back to strategy coroutines. This requirement can be</span>
<span class="sd">        weakened by setting `allow_noncopyable_actions` to `True`. In</span>
<span class="sd">        this case, noncopyable actions must be immutable. For example, a</span>
<span class="sd">        pure function can be used as an action but a closure that</span>
<span class="sd">        captures a mutable piece of state cannot (in which case</span>
<span class="sd">        computing the child of a node could affect its siblings by</span>
<span class="sd">        mutating some actions in their paths).</span>

<span class="sd">        In addition, non-copyable strategy arguments must never be</span>
<span class="sd">        mutated. Copyable arguments such as lists of copyable values can</span>
<span class="sd">        be mutated, since `reify` automaticallt performs deepcopies.</span>
<span class="sd">        Noncopyable arguments such as functions are allowed (e.g., to</span>
<span class="sd">        enable implementing higher-order strategies) but they must be</span>
<span class="sd">        pure and not mutate any state.</span>

<span class="sd">        When `allow_noncopyable_actions` is set to `False`, a dynamic</span>
<span class="sd">        check is performed to ensure that actions are copyable: an</span>
<span class="sd">        action is considered copyable if it can be serialized into JSON</span>
<span class="sd">        by pydantic (this is necessary since calling `deepcopy` on a</span>
<span class="sd">        closure returns the same closure unchanged).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_reify</span><span class="p">(</span>
        <span class="n">strategy</span><span class="o">=</span><span class="n">strategy</span><span class="p">,</span>
        <span class="n">root_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">monitor</span><span class="o">=</span><span class="n">monitor</span><span class="p">,</span>
        <span class="n">allow_noncopyable_actions</span><span class="o">=</span><span class="n">allow_noncopyable_actions</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="delphyne.StrategyException" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">StrategyException</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>


        <p>Raised when a strategy encounters an internal error (e.g. a failed
assertion or an index-out-of-bounds error).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="delphyne.StrategyException.exn">exn</span></code></td>
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The original exception that was raised.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">StrategyException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Raised when a strategy encounters an internal error (e.g. a failed</span>
<span class="sd">    assertion or an index-out-of-bounds error).</span>

<span class="sd">    Attributes:</span>
<span class="sd">        exn: The original exception that was raised.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">exn</span><span class="p">:</span> <span class="ne">Exception</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="delphyne.TreeMonitor" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TreeMonitor</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents first">


        <p>A record that gathers a tree cache along with a series of hooks to
be called on node creation.</p>
<p>When no monitor is passed to <a class="autorefs autorefs-internal" title="reify" href="#delphyne.reify"><code>reify</code></a>, the resulting tree is a pure,
immutable datastructure. Passing a monitor allows adding limited
side effects in the form of caching and hooks.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="delphyne.TreeMonitor.cache">cache</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="TreeCache (delphyne.core.reification.TreeCache)" href="#delphyne.TreeCache">TreeCache</a> | <a class="autorefs autorefs-internal" title="TreeCache (delphyne.core.reification.TreeCache)" href="#delphyne.TreeCache">TreeCache</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a cache for never recomputing the same node twice.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="delphyne.TreeMonitor.hooks">hooks</span></code></td>
            <td>
                  <code><span title="collections.abc.Sequence">Sequence</span>[<a class="autorefs autorefs-internal" title="TreeHook (delphyne.core.reification.TreeHook)" href="#delphyne.TreeHook">TreeHook</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>functions to be called every time a new node is created.
For example, hooks can be used to automatically produce a
trace that keeps track of all visited nodes (see
<a class="autorefs autorefs-internal" title="tracer_hook" href="../traces/#delphyne.tracer_hook"><code>tracer_hook</code></a>).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="quote">
                <summary>Source code in <code>src/delphyne/core/reification.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TreeMonitor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A record that gathers a tree cache along with a series of hooks to</span>
<span class="sd">    be called on node creation.</span>

<span class="sd">    When no monitor is passed to `reify`, the resulting tree is a pure,</span>
<span class="sd">    immutable datastructure. Passing a monitor allows adding limited</span>
<span class="sd">    side effects in the form of caching and hooks.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        cache: a cache for never recomputing the same node twice.</span>
<span class="sd">        hooks: functions to be called every time a new node is created.</span>
<span class="sd">            For example, hooks can be used to automatically produce a</span>
<span class="sd">            trace that keeps track of all visited nodes (see</span>
<span class="sd">            `tracer_hook`).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cache</span><span class="p">:</span> <span class="n">TreeCache</span> <span class="o">|</span> <span class="n">TreeCache</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">hooks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">TreeHook</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="delphyne.TreeCache" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TreeCache</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TreeCache</span><span class="p">:</span> <span class="n"><span title="dict">dict</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="GlobalNodePath (delphyne.core.refs.GlobalNodePath)" href="../traces/#delphyne.core.refs.GlobalNodePath">GlobalNodePath</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="Tree


  
      dataclass
   (delphyne.core.trees.Tree)" href="../trees/#delphyne.Tree">Tree</a></span><span class="p">[</span><span class="n"><span title="typing.Any">Any</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>A cache for never recomputing the same node twice.</p>
<p>Each encountered subtree and (recursively) nested tree is stored,
indexed by its global reference.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="delphyne.TreeHook" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">TreeHook</span>


</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">TreeHook</span><span class="p">:</span> <span class="n"><span title="collections.abc.Callable">Callable</span></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-internal" title="Tree


  
      dataclass
   (delphyne.core.trees.Tree)" href="../trees/#delphyne.Tree">Tree</a></span><span class="p">[</span><span class="n"><span title="typing.Any">Any</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">,</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>A function to be called every time a new tree node is created.</p>

    </div>

</div><h2 id="internals">Internals</h2>


<div class="doc doc-object doc-class">



<h3 id="delphyne.core.trees.NestedTreeSpawner" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">NestedTreeSpawner</span>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>


        <p>A function providing the ability to spawn nested trees attached to a
given node.</p>








              <details class="quote">
                <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">NestedTreeSpawner</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function providing the ability to spawn nested trees attached to a</span>
<span class="sd">    given node.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">[</span><span class="n">N</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">T</span><span class="p">](</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">strategy</span><span class="p">:</span> <span class="s2">&quot;StrategyComp[N, P, T]&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NestedTree[N, P, T]&quot;</span><span class="p">:</span> <span class="o">...</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="delphyne.core.trees.QuerySpawner" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">QuerySpawner</span>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>


        <p>A function providing the ability to attach queries to a given node.</p>








              <details class="quote">
                <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">QuerySpawner</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A function providing the ability to attach queries to a given node.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">[</span><span class="n">T</span><span class="p">](</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">AbstractQuery</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;AttachedQuery[T]&quot;</span><span class="p">:</span> <span class="o">...</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="delphyne.core.trees.AbstractBuilderExecutor" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AbstractBuilderExecutor</span>


</h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract class for builder executors.</p>
<p>An executor implements the ability of converting space builders into
actual spaces. The <a class="autorefs autorefs-internal" title="reify" href="#delphyne.reify"><code>reify</code></a> function relies on such an executor
internally.</p>








              <details class="quote">
                <summary>Source code in <code>src/delphyne/core/trees.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">AbstractBuilderExecutor</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract class for builder executors.</span>

<span class="sd">    An executor implements the ability of converting space builders into</span>
<span class="sd">    actual spaces. The `reify` function relies on such an executor</span>
<span class="sd">    internally.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parametric</span><span class="p">[</span><span class="n">S</span><span class="p">](</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">space_name</span><span class="p">:</span> <span class="n">SpaceName</span><span class="p">,</span>
        <span class="n">parametric_builder</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">SpaceBuilder</span><span class="p">[</span><span class="n">S</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">S</span><span class="p">]:</span> <span class="o">...</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">nonparametric</span><span class="p">[</span><span class="n">S</span><span class="p">](</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">SpaceName</span><span class="p">,</span> <span class="n">builder</span><span class="p">:</span> <span class="n">SpaceBuilder</span><span class="p">[</span><span class="n">S</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">S</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parametric</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">builder</span><span class="p">)()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../../javascript/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>